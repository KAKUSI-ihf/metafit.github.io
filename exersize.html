<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style_of_squat.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body class="exersize">
    <div class="container">
        <!-- <h1>WEBカメラの映像を表示</h1> -->
        <div class="row">
            <div class="col-sm-3 video">
                <span class="video">Video</span>
                <video id="video">
                </video>
            </div>
            <div id="clock">
                <p>
                    00:00
                </p>
            </div>
        </div>
        <div>
            <button onclick="start_exercise()">
                开始锻炼吧！
            </button>
        </div>
    </div>
    <script>
        const video = document.getElementById("video")
        navigator.mediaDevices.getUserMedia({
            video: true,
            audio: false,
        }).then(stream => {
            video.srcObject = stream;
            video.play()
        }).catch(e => {
            console.log(e)
        })

        let minutes,seconds
        let ele = document.getElementById('clock').firstElementChild
        function start_exercise(time=10)
        {
            minutes = time
            seconds = 0
            ele.innerText = `${time}:00`
            setInterval(time_reduct,1000)
        }
        function time_reduct()
        {
            if(!minutes && !seconds)
                clearInterval(time_reduct)
            if(seconds)
            {
                seconds--
            }
            else
            {
                seconds = 59
                minutes--
            }
            ele.innerText = `${minutes}:${seconds}`
        }
    </script>
</body>

</html>